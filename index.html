<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Caixa Eletrônico</title>

	<script>

		var saldo = 100; //Variavel Global
		let nome = prompt("Qual seu nome?")
		alert(`Ola ${nome}, é um prazer ter você por aqui! `)

		function senha() {
			const password = parseInt(prompt("Digite sua senha:"));

			if (password == 3589) {
				alert(`Sua senha está correta!`);
			} else {
				alert(`Senha incorreta, tente novamente!!!`);
				senha();
			}

		}



		senha()


		function inicio() {
			//ESCOPO
			//Variavel Local
			var escolha = parseInt(prompt('Selecione uma opção:\n 1) Saldo\n 2) Extrato\n 3) Saque\n 4) Fazer deposito\n 5) Fazer transferência\n 6) Sair'));

			switch (escolha) {
				case 1:
					alert(ver_saldo())
					break;
				case 2:
					alert(ver_extrato())
					break;
				case 3:
					alert(fazer_deposito())
					break;
				case 4:
					alert(fazer_saque())
					break;
				case 5:
					alert(fazer_transferencia())
					break
				case 6:
					alert(sair())
				default:
					alert(erro())

			}

		}



		function fazer_transferencia() {

		senha()
        
		var conta = prompt("qual o numero da conta")

			let valor_transferencia = prompt("Qual valor da transferência?")

			if (valor_transferencia <= 0 || valor_transferencia > saldo) {
				alert("valor da transferência invalido, digite o valor novamente")
				fazer_transferencia();
			}
			else {
				saldo -= valor_transferencia
				ver_saldo();
			}
		}



		function ver_extrato() {
			alert("Hotwheels: 14,97 | 05/09/2023\nAmericanas\n\nGod of War Ragnarok PS5: 179,56 | 29/08/2023\nAmericanas\n\nPS5: 4.229,99   25/08/2023\nAmazon\n\nCamiseta Nike: 119,78 | 10/08/2023\nNike\n\n\n....")

			inicio();
		}
		function ver_saldo() {
			alert('Seu saldo atual é: ' + saldo + 'R$');
			inicio();
		}

		function fazer_deposito() {

			var deposito = parseFloat(prompt('Qual o valor para depósito?'));

			// Not a Number --> Isso é um não-número?
			if (isNaN(deposito) || deposito === '') {
				alert('Por favor, informe um número.');
				fazer_deposito();
			}
			else if (deposito < 0) {
				alert(`Por favor, informe um valor positivo`)
				fazer_deposito();

			} else {
				saldo += deposito;
				//saldo = saldo + deposito;
				ver_saldo();
			}
		}

		function fazer_saque() {

			var saque = parseFloat(prompt('Qual o valor para saque?'));

			if (isNaN(saque) || saque === '') {
				alert('Por favor, informe um número.');
				fazer_saque();
			} else if (saque > saldo || saque <= 0) {
				alert(`Operação não autorizada`)
				fazer_saque();
			} else {
				saldo -= saque;
				//saldo = saldo - saque;
				ver_saldo();
			}
		}

		function erro() {
			alert('Por favor, informe um número entre 1 e 6.');
			inicio();
		}

		function sair() {
			var confirma = confirm('Você deseja sair?');
			if (confirma) {
				alert(` ${Nome}, foi um prazer ter você por aqui!`)
				window.close();
			} else {
				inicio();
			}
		}

		inicio();
	</script>
</head>

<body>

</body>

</html>